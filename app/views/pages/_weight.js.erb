$(function() {
  var app = Elm.Weight.init({
    node: $('#elm-app').get(0),
    flags: {
      start: <%= Mass::DEFAULT_START %>,
      units: '<%= Mass::DEFAULT_UNIT.key.to_s %>',
      kilos: [<%= @kilos.map(&:to_s).join(',') %>],
      dates: ['<%= @dates.map(&:to_s).join("','").html_safe %>'],
      debug: true
    }
  });
  $('#units').change(function () {
    app.ports.changeUnits.send($('#units').val());
  });
  $('#start').change(function () {
    app.ports.changeStart.send(parseInt($('#start').val()));
  });
});
