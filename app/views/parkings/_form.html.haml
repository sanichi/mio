= content_for :javascript do
  = render "form.js"

.row
  .col-xs-12
    = form_for parking, html: { class: "form-horizontal", role: "form" } do |f|
      %fieldset
        - shared = { form: f, object: parking, col: "md", pad: 3 }
        = render "utils/select_completer_for", shared.merge(param: :vehicle_id, text: t("vehicle.vehicle"), menu: vehicle_menu(parking.vehicle_id), width: 2)
        = render "utils/select_for", shared.merge(param: :bay, text: t("flat.bay"), width: 2, menu: parking_bay_menu(parking.bay))
        = render "utils/text_field_for", shared.merge(param: :noted_at_string, text: t("parking.noted_at"), width: 4)

      .row.bottom_margin
        .col-md-offset-3.col-md-9
          = f.submit t("save"), class: "btn btn-info"
          = link_to t("cancel"), parkings_path, class: "btn btn-default"
          - if can?(:create, Vehicle)
            = link_to t("vehicle.new"), new_vehicle_path, class: "btn btn-info"

      .row
        .col-xs-12
          = render "bay_map"
